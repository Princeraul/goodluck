{"version":3,"sources":["common.min.js"],"names":["activate","document","baseQuery","dialog","$","on","toggleClass","gzhDialog","setTimeout","NewgzhDialog","winDialog","hideDialog","removeClass","init","this","giftConvert","markwords","error","isEmpty","my","flag","index","num","hasClass","obj","eq","find","each","text","val","parseFloat","numberDefault","alert","tabChange","addClass","hide","show","selectMore","siblings","commit","rotate","$btn","playnum","isture","clickfunc","win","nowin","Math","round","random","data","floor","rotateFunc","click","angle","stopRotate","duration","animateTo","callback","fadeIn","html","$pointsTips","$pointsTipsClose","fadeOut"],"mappings":"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","file":"common.min.js","sourcesContent":["'use strict';\r\n\r\nvar activate = ('createTouch' in document) ? 'touchstart' : 'click';\r\n\r\nvar baseQuery = {\r\n\tdialog: function () {\r\n\t\t$('.dialog-fade').on(activate, function () {\r\n\t\t\t$('.dialog, .dialog-content').toggleClass('dialog-active');\r\n\t\t});\r\n\t},\r\n\t// 未关注浮层\r\n\tgzhDialog: function () {\r\n\t\t$('.dialog-fade-gzh').on(activate, function () {\r\n\t\t\t$('.not-gzh').toggleClass('dialog-active');\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t$('.not-gzh').toggleClass('dialog-active');\r\n\t\t\t}, 2000);\r\n\t\t});\r\n\t},\r\n\t// 新版二维码 tine: 2016-07-13\r\n\tNewgzhDialog: function() {\r\n\t\t$('.dialog-fade-gzh').on(activate, function () {\r\n\t\t\t$('.dialog, .two-code').toggleClass('dialog-active');\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t$('.dialog, .two-code').toggleClass('dialog-active');\r\n\t\t\t}, 8000);\r\n\t\t});\r\n\t},\r\n\twinDialog: function () {\r\n\t\t$('.dialog-fade-win').on(activate, function () {\r\n\t\t\t$('.dialog, .yes-win').toggleClass('dialog-active');\r\n\t\t});\r\n\t},\r\n\thideDialog: function () {\r\n\t\t$('.hide-dialog').on(activate, function () {\r\n\t\t\t$('.dialog, .yes-win').removeClass('dialog-active');\r\n\t\t});\r\n\t},\r\n\tinit: function () {\r\n\t\tthis.dialog();\r\n\t\tthis.winDialog();\r\n\t\tthis.hideDialog();\r\n\t\tthis.NewgzhDialog();\r\n\t}\r\n};\r\nbaseQuery.init();\r\n\r\n\r\n\r\nvar giftConvert = {\r\n\tmarkwords: '恭喜你兑换成功！',\r\n\terror: '对不起你的积分不足,或者未填写完整的信息，不能兑换！',\r\n\tisEmpty: function(my) {\r\n\t\tvar flag = false;\r\n\t\tif(!my.index){\r\n\t\t\t$(my.obj).eq(my.index).find('input').each(function(){\r\n\t\t\t\tif($(this).val() !== '' && parseFloat($(this).val()) < my.numberDefault){\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar num;\r\n\t\t\tvar hasClass = $(my.obj).eq(my.index).find('li').hasClass('active');\r\n\t\t\t$(my.obj).eq(my.index).find('li.active span').each(function(){\r\n\t\t\t\tnum = +$(this).text();\r\n\t\t\t});\r\n\t\t\t// 判断是否选择礼品\r\n\t\t\t$(my.obj).eq(my.index).find('input').each(function(){\r\n\t\t\t\tif($(this).val() !== '' && hasClass !== false && num === 10){\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// 判断积分兑换结果\r\n\t\tif(flag){\r\n\t\t\talert(this.markwords);\r\n\t\t}else{\r\n\t\t\talert(this.error);\r\n\t\t}\r\n\t},\r\n\ttabChange: function(my){\r\n\t\t$(my.obj).on(activate, function(){\r\n\t\t\tvar index = $(this).index();\r\n\t\t\t$(my.obj).removeClass('active').eq(index).addClass('active');\r\n\t\t\t$('.intergral').hide().eq(index).show();\r\n\t\t});\r\n\t},\r\n\tselectMore: function(my){\r\n\t\t$(my.obj).on('click', function(){\r\n\t\t\t$(this).toggleClass('active').siblings().removeClass('active');\r\n\t\t});\r\n\t},\r\n\tcommit: function(index){\r\n\t\tswitch(index){\r\n\t\t\tcase 0:\r\n\t\t\t\tgiftConvert.isEmpty({obj: '.intergral', index: index, numberDefault: 3.14});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tgiftConvert.isEmpty({obj: '.intergral', index: index});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar rotate = function() {\r\n\tvar $btn = $('.rotate-playbtn');\r\n\tvar playnum = 100; //初始次数，由后台传入\r\n\tvar isture = 0;\r\n\tvar clickfunc = function() {\r\n\t\tvar win = '恭喜你,获得';\r\n\t\tvar nowin = '很遗憾,';\r\n\t\tvar num = Math.round(Math.random());\r\n\t\tvar data = ['美食大礼包', '红包1元', '积分5个', '谢谢参与'];\r\n\t\t//data为随机出来的结果，根据概率后的结果\r\n\t\tdata = data[Math.floor(Math.random() * 4)];\r\n\t\t// num为随机输，随机执行deg\r\n\t\tswitch(data) {\r\n\t\t\tcase '美食大礼包':\r\n\t\t\t\trotateFunc(num ? 22.5 : 202.5 , win + data);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '红包1元':\r\n\t\t\t\trotateFunc(num ? 67.5 : 247.5, win +data);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '积分5个':\r\n\t\t\t\trotateFunc(num ? 112.5 : 292.5, win + data);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '谢谢参与':\r\n\t\t\t\trotateFunc(num ? 157.5 : 337.5, nowin + data);\r\n\t\t\t\t$('.rotate-dialog .btn').hide();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t$btn.click(function() {\r\n\t\t// 如果在执行就退出\r\n\t\tif(isture) return;\r\n\t\t// 标志为 在执行\r\n\t\tisture = true;\r\n\r\n\t\t//当抽奖次数为0的时候执行\r\n\t\tif(playnum <= 0) {\r\n\t\t\tisture = false;\r\n\t\t} else {\r\n\t\t\t//还有次数就执行\r\n\t\t\tplaynum = playnum - 1;\r\n\t\t\t//执行转盘了则次数减1\r\n\t\t\tif(playnum <= 0) {\r\n\t\t\t\tplaynum = 0;\r\n\t\t\t}\r\n\t\t\tclickfunc();\r\n\t\t}\r\n\t});\r\n\r\n\tvar rotateFunc = function(angle, text) {\r\n\t\tisture = true;\r\n\t\t$btn.stopRotate();\r\n\t\t$btn.rotate({\r\n\t\t\tangle: 0,\r\n\t\t\tduration: 4000, //旋转时间\r\n\t\t\tanimateTo: angle + 1440, //让它根据得出来的结果加上1440度旋转\r\n\t\t\tcallback: function() {\r\n\t\t\t\tisture = false; // 标志为 执行完毕\r\n\t\t\t\t$('.rotate-dialog').fadeIn('fast').find('p').html(text);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\n\r\n$(function() {\r\n\tvar $pointsTips = $('.points-header');\r\n\tvar $pointsTipsClose = $('.points-header span');\r\n\r\n\t// 积分浮层\r\n\tsetTimeout(function(){\r\n\t\t$pointsTips.fadeIn(1200);\r\n\t}, 100);\r\n\r\n\t$pointsTipsClose.on(activate, function(){\r\n\t\tsetTimeout(function(){\r\n\t\t\t$pointsTips.fadeOut(1200);\r\n\t\t}, 1000);\r\n\t});\r\n\r\n\t// 积分实物切换\r\n\tgiftConvert.tabChange({obj: '.points-navbar a'});\r\n\t// 选择积分\r\n\tgiftConvert.selectMore({obj: '.intergral-item li'});\r\n\r\n\t// 转盘\r\n\trotate();\r\n});\r\n"],"sourceRoot":"/source/"}